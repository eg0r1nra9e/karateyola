// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:../database/dev.db"
}

// Населенный пункт
model City {
    id     Int     @id @default(autoincrement())
    region String
    city   String?
    teams  Team[]
}

// Команда
model Team {
    id         Int       @id @default(autoincrement())
    name       String // Наименование команды
    cityId     Int? // Идентификатор наспеленного пункта
    city       City?     @relation(fields: [cityId], references: [id])
    athletes   Athlete[]
    created_at DateTime  @default(now())
    updated_at DateTime  @updatedAt

    @@unique([name, cityId])
}

// Спортсмен
model Athlete {
    id          Int       @id @default(autoincrement())
    lastName    String // Фамилия спортсмена
    firstName   String // Имя спортсмена
    dateOfBirth DateTime // Дата рождения спортсмена
    teamId      Int? // Идентификатор команды
    team        Team?     @relation(fields: [teamId], references: [id])
    gender      String // Пол спортсмена
    weight      Int // Вес спортсмена
    created_at  DateTime  @default(now())
    updated_at  DateTime  @updatedAt

    @@unique([firstName, lastName, dateOfBirth, teamId])
}

// Дисциплина
model Competition {
    id   Int     @id @default(autoincrement())
    name String //Наименование дисциплины
    created_at  DateTime  @default(now())
    updated_at  DateTime  @updatedAt
}


//Категория

model Category {
    id   Int     @id @default(autoincrement())
    name String //Наименование категории
    time Int //Время боя
    created_at  DateTime  @default(now())
    updated_at  DateTime  @updatedAt
}